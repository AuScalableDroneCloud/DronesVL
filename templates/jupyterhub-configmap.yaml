#See: https://github.com/jupyterhub/zero-to-jupyterhub-k8s/blob/main/jupyterhub/values.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: jupyterhub-configmap
  namespace: jupyterhub
data:
  values.yaml: |
    proxy:
      https:
        enabled: true
        hosts:
          - ${JHUB_HOST}
        letsencrypt:
          contactEmail: ${JHUB_ADMIN_USER}
      service:
        loadBalancerIP: ${JHUB_LOADBALANCER_IP}
    hub:
      config:
        Auth0OAuthenticator:
          oauth_callback_url: https://${JHUB_HOST}/hub/oauth_callback
          scope:
            - openid
            - email
        Authenticator:
          admin_users:
            - ${JHUB_ADMIN_USER}
          auto_login: true
        JupyterHub:
          authenticator_class: auth0

    #Custom environment variables
    singleuser:
      defaultUrl: "/tree"
      extraEnv:
        JUPYTERHUB_URL: "https://${JHUB_HOST}"
        JUPYTER_OAUTH2_API_AUDIENCE: "https://${WEBAPP_HOST}/api"
        JUPYTER_OAUTH2_CLIENT_ID: "${WO_AUTH0_KEY}"
        JUPYTER_OAUTH2_SCOPE: "openid profile email"
        JUPYTER_OAUTH2_AUTH_PROVIDER_URL: "https://${WO_AUTH0_SUBDOMAIN}.auth0.com"

